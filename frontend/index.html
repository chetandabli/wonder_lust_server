<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Wonderlust Travels</title>

  <style>
    /* ---------- Reset / Base ---------- */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    :root {
      --brand: #0072ff;
      --ink: #0f172a;
      --card: #ffffff;
      --muted: #64748b;
      --shadow: 0 8px 24px rgba(0, 0, 0, .12);
    }

    body {
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color: var(--ink);
      background: radial-gradient(circle at top left, #e0f2fe 0, #f9fafb 40%, #e5e7eb 100%);
    }

    /* ---------- Simple top nav wrapper ---------- */
    .top-nav {
      position: fixed;
      top: 0;
      width: 100%;
      z-index: 10;
      background: linear-gradient(90deg, rgba(15, 23, 42, .92), rgba(30, 64, 175, .92));
      backdrop-filter: blur(10px);
      box-shadow: 0 10px 30px rgba(15, 23, 42, .45);
    }

    .top-nav-inner {
      max-width: 1200px;
      margin: 0 auto;
      padding: 10px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .btn,
    nav button {
      border-radius: 999px !important;
    }

    /* ---------- Hero Section (Video Background + Carousel Text) ---------- */
    .hero {
      position: relative;
      min-height: 78vh;
      overflow: hidden;
      margin-top: 60px;
      background-position: center;
      background-size: cover;
      background-repeat: no-repeat;
      /* Fallback color while video loads or if it fails */
      background-color: #020617;
    }

    /* Background video layer */
    .hero-video {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      z-index: 0;
      opacity: 0; /* hidden until loaded */
      transition: opacity .6s ease;
      background: #020617;
    }

    .hero-video.is-visible {
      opacity: 1;
    }

    .hero::before {
      content: "";
      position: absolute;
      inset: 0;
      z-index: 1;
      background: linear-gradient(180deg, rgba(0, 0, 0, .55), rgba(0, 0, 0, .35));
    }

    .hero-content {
      position: relative;
      z-index: 2;
      max-width: 1200px;
      margin: 0 auto;
      min-height: 78vh;
      display: flex;
      align-items: center;
      padding: 0 7%;
      color: #fff;
      text-shadow: 0 10px 25px rgba(0, 0, 0, .55);
    }

    .kicker {
      font-weight: 800;
      font-size: clamp(1.1rem, 2vw, 1.3rem);
      letter-spacing: .15em;
      opacity: .9;
    }

    .hero h1 {
      line-height: 1.05;
      margin: .4rem 0;
    }

    .hero .big {
      font-weight: 900;
      font-size: clamp(2.2rem, 7vw, 5rem);
    }

    .hero .sub {
      font-weight: 800;
      font-size: clamp(1.4rem, 4vw, 2.6rem);
    }

    .hero .highlight {
      color: #a3e635;
    }

    .cta-row {
      margin-top: 1.2rem;
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
    }

    .btn {
      background: var(--brand);
      color: #fff;
      border: 0;
      cursor: pointer;
      padding: 8px 18px;
      font-weight: 600;
      transition: transform .12s ease, background .2s ease;
    }

    .btn:hover {
      background: #0056c2;
      transform: translateY(-1px);
    }

    .btn.secondary {
      background: transparent;
      border: 1px solid rgba(255, 255, 255, .8);
    }

    .btn.secondary:hover {
      background: rgba(255, 255, 255, .12);
    }

    .hero-meta {
      margin-top: 0.75rem;
      font-size: 0.9rem;
      opacity: 0.92;
    }

    .hero-dots {
      display: flex;
      gap: 8px;
      margin-top: 1.4rem;
      align-items: center;
    }

    .hero-dot {
      width: 10px;
      height: 10px;
      border-radius: 999px;
      border: none;
      background: rgba(248, 250, 252, 0.45);
      cursor: pointer;
      padding: 0;
      transition: all 0.15s ease;
    }

    .hero-dot.active {
      width: 22px;
      background: #facc15;
    }

    /* ---------- Main Section (Trips) ---------- */
    main {
      max-width: 1200px;
      margin: -40px auto 60px;
      padding: 0 16px;
    }

    .section-title {
      display: flex;
      align-items: center;
      gap: 10px;
      margin: 40px 4px 18px;
      font-size: clamp(1.4rem, 3vw, 2rem);
      font-weight: 800;
    }

    .section-title::before {
      content: "";
      width: 46px;
      height: 6px;
      border-radius: 6px;
      background: #facc15;
    }

    .grid {
      display: grid;
      gap: 18px;
      grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
    }

    .card {
      background: var(--card);
      border-radius: 16px;
      box-shadow: var(--shadow);
      overflow: hidden;
      transition: transform .15s ease, box-shadow .2s ease, translate .15s ease;
      border: 1px solid rgba(148, 163, 184, 0.15);
      cursor: pointer;
    }

    .card:hover {
      transform: translateY(-4px);
      box-shadow: 0 14px 32px rgba(15, 23, 42, .25);
    }

    .card img {
      width: 100%;
      object-fit: cover;
      height: 300px;
    }

    .card .pad {
      padding: 14px;
    }

    .card h3 {
      font-size: 1.1rem;
      font-weight: 800;
      margin: .2rem 0 .35rem;
    }

    .card p {
      color: var(--muted);
      font-size: .95rem;
    }

    .price {
      display: block;
      margin-top: .6rem;
      font-weight: 800;
      color: var(--brand);
    }

    /* ---------- Footer ---------- */
    footer {
      background: #0b1220;
      color: #cbd5e1;
      margin-top: 60px;
    }

    .footer-wrap {
      max-width: 1200px;
      margin: 0 auto;
      padding: 28px 16px;
      display: grid;
      gap: 18px;
      grid-template-columns: 1.2fr 1fr 1fr;
    }

    footer h4 {
      color: #fff;
      margin-bottom: 10px;
    }

    footer a {
      color: #cbd5e1;
      text-decoration: none;
    }

    footer a:hover {
      color: #fff;
    }

    .foot-bottom {
      border-top: 1px solid rgba(255, 255, 255, .08);
      padding: 12px 16px;
      text-align: center;
      opacity: .8;
    }

    /* ---------- Responsive ---------- */
    @media (max-width:820px) {
      .footer-wrap {
        grid-template-columns: 1fr;
      }

      .hero-content {
        padding: 0 1.5rem;
      }

      .hero .big {
        font-size: 2.3rem;
      }

      .hero .sub {
        font-size: 1.3rem;
      }
    }
  </style>
</head>

<body>

  <!-- ===== Header / Navbar ===== -->
  <nav class="top-nav">
    <div class="top-nav-inner">
      <div style="
        display:flex;
        align-items:center;
        gap:10px;
        font-size:1.4rem;
        font-weight:bold;
        color:#a3e635;
        cursor: pointer;
      " onclick="location.href='index.html'">
        <img src="logo.png" alt="Wonderlust Travels Logo" style="
          height:40px;
          width:auto;
          object-fit:contain;
          vertical-align:middle;
        ">
        WONDERLUST TRAVELS
      </div>

      <div style="display:flex; gap:15px; align-items:center;">
        <span style="font-size:1rem; font-weight:500; color:white;">üìû +91 9876543210</span>

        <button id="authBtn" style="
          background:#0072ff;
          color:white;
          border:none;
          padding:8px 16px;
          border-radius:999px;
          cursor:pointer;
          transition:0.3s;
          font-weight:600;
        " onmouseover="this.style.background='#0056c2'" onmouseout="this.style.background='#0072ff'"></button>

        <button onclick="location.href='booking.html'" style="
          background:#0072ff;
          color:white;
          border:none;
          padding:8px 16px;
          border-radius:999px;
          cursor:pointer;
          transition:0.3s;
          font-weight:600;
        " title="SSSSS dgrtgrtg" onmouseover="this.style.background='#0056c2'" onmouseout="this.style.background='#0072ff'">
          Booking
        </button>
      </div>
    </div>
  </nav>

  <!-- ===== Hero Section (Video Background + Dynamic Text Carousel) ===== -->
  <section class="hero" id="hero" aria-label="Hero">
    <!-- Background video -->
    <video
      id="heroVideo"
      class="hero-video"
      src="TRAVEL.mp4"
      autoplay
      muted
      loop
      playsinline
    ></video>

    <div class="hero-content">
      <div>
        <div class="kicker">PLAN YOUR</div>
        <h1 class="big">VACATION TO <span class="highlight" id="heroHighlight">GOA</span></h1>
        <p class="sub" id="heroSub">Handpicked group trips & custom getaways</p>
        <p class="hero-meta" id="heroMeta"></p>
        <div class="cta-row">
          <button class="btn" onclick="document.getElementById('trips').scrollIntoView({ behavior: 'smooth' });">
            Explore Trips
          </button>
          <button class="btn secondary" id="heroViewBtn">
            View Trip
          </button>
        </div>
        <div class="hero-dots" id="heroDots"></div>
      </div>
    </div>
  </section>

  <!-- ===== Featured Trips ===== -->
  <main id="trips">
    <h2 class="section-title">Featured Trips</h2>

    <div class="grid" id="tripGrid"></div>
  </main>

  <!-- ===== Footer ===== -->
  <footer>
    <div class="footer-wrap">
      <div>
        <h4>About Wonderlust Travels</h4>
        <p>We curate unforgettable group trips and crafted holidays across India &amp; abroad. 1000+ happy travelers.</p>
      </div>
      <div>
        <h4>Contact</h4>
        <p>üìû +91 9876543210<br />‚úâÔ∏è hello@wanderlusttravels.com</p>
      </div>
      <div>
        <h4>Quick Links</h4>
        <p><a href="feedback.html">Feedback</a> ¬∑ <a href="feedback.html">About</a> ¬∑ <a href="#">Terms</a></p>
      </div>
    </div>
    <div class="foot-bottom">¬© <span id="year"></span> Wonderlust Travels ‚Äî All rights reserved.</div>
  </footer>

  <script>
    // Keep footer year updated
    document.getElementById('year').textContent = new Date().getFullYear();
  </script>

  <!-- Data: DESTINATIONS (+ optionally TRIP_DETAILS) -->
  <script src="destinations.js"></script>

  <script>
    // ---------- Auth button ----------
      const authBtn = document.getElementById('authBtn');

    const USER_STORAGE_KEY = 'wander_user';

    function getStoredUser() {
      const raw = localStorage.getItem(USER_STORAGE_KEY);
      if (!raw) return null;

      try {
        const parsed = JSON.parse(raw);
        if (!parsed.id || !parsed.token) {
          return null;
        }
        return parsed;
      } catch (err) {
        console.warn('Failed to parse stored user:', err);
        return null;
      }
    }

    const currentUser = getStoredUser();
    let userId = currentUser?.id || null;

    if (!currentUser) {
      authBtn.textContent = 'Login';
      authBtn.onclick = () => window.location.href = 'login.html';
    } else if (currentUser.role === 'admin') {
      authBtn.textContent = 'Admin Panel';
      authBtn.onclick = () => window.location.href = 'admin.html';
    } else {
      authBtn.textContent = 'Profile';
      authBtn.onclick = () => window.location.href = 'profile.html';
    }

    // ---------- Trips Grid ----------
    const grid = document.getElementById('tripGrid');

    function formatINR(amount) {
      return new Intl.NumberFormat('en-IN').format(amount);
    }

    (window.DESTINATIONS || []).forEach(d => {
      const article = document.createElement('article');
      article.className = 'card';
      article.onclick = () => location.href = d.page;
      article.innerHTML = `
        <img src="${d.image}" alt="${d.name}">
        <div class="pad">
          <h3>${d.name}</h3>
          <p>${d.short}</p>
          <span class="price">Starting just ‚Äî ‚Çπ${formatINR(d.price)}</span>
        </div>
      `;
      grid.appendChild(article);
    });

    // ---------- Hero Carousel (Text only; video is static background) ----------
    const heroEl = document.getElementById('hero');
    const heroHighlightEl = document.getElementById('heroHighlight');
    const heroSubEl = document.getElementById('heroSub');
    const heroMetaEl = document.getElementById('heroMeta');
    const heroViewBtn = document.getElementById('heroViewBtn');
    const heroDotsEl = document.getElementById('heroDots');
    const heroVideo = document.getElementById('heroVideo');

    const destinations = window.DESTINATIONS || [];
    const tripDetails = window.TRIP_DETAILS || {};

    // Build slides safely
    const slides = destinations.map(d => {
      const detail = tripDetails[d.slug] || {};
      return {
        slug: d.slug,
        name: d.name,
        page: d.page,
        bg: detail.heroImage || d.image,
        highlight: detail.heroHighlight || d.name.toUpperCase(),
        tagline: detail.heroTagline || d.short,
        price: d.price,
        short: d.short
      };
    });

    let currentSlide = 0;
    let slideTimer = null;
    const SLIDE_INTERVAL = 5000; // ms

    function renderHeroSlide(index) {
      const s = slides[index];
      if (!s) return;
      heroHighlightEl.textContent = s.highlight;
      heroSubEl.textContent = s.tagline;
      heroMetaEl.textContent = `From ‚Çπ${formatINR(s.price)} ‚Ä¢ ${s.short}`;
      heroViewBtn.onclick = () => location.href = s.page;

      const dots = heroDotsEl.querySelectorAll('.hero-dot');
      dots.forEach((dot, i) => {
        dot.classList.toggle('active', i === index);
      });
    }

    function resetTimer() {
      if (slideTimer) clearInterval(slideTimer);
      if (!slides.length) return;
      slideTimer = setInterval(() => {
        currentSlide = (currentSlide + 1) % slides.length;
        renderHeroSlide(currentSlide);
      }, SLIDE_INTERVAL);
    }

    function initHeroCarousel() {
      if (!slides.length) return;

      // Create dots
      heroDotsEl.innerHTML = '';
      slides.forEach((s, i) => {
        const dot = document.createElement('button');
        dot.type = 'button';
        dot.className = 'hero-dot' + (i === 0 ? ' active' : '');
        dot.setAttribute('aria-label', `Go to slide ${i + 1}`);
        dot.onclick = () => {
          currentSlide = i;
          renderHeroSlide(currentSlide);
          resetTimer();
        };
        heroDotsEl.appendChild(dot);
      });

      renderHeroSlide(currentSlide);
      resetTimer();
    }

    // ---------- Background Video Handling ----------
    if (heroVideo) {
      // When video has enough data to start playing
      heroVideo.addEventListener('canplay', () => {
        heroVideo.classList.add('is-visible');
        const playPromise = heroVideo.play();
        if (playPromise !== undefined) {
          playPromise.catch(() => {
            // Autoplay might be blocked; in that case we just leave the solid background
          });
        }
      });

      // If any error occurs, keep the solid background
      heroVideo.addEventListener('error', () => {
        heroVideo.classList.remove('is-visible');
      });

      // Optional: respect reduced motion
      const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)');
      if (prefersReducedMotion.matches) {
        heroVideo.pause();
      }
    }

    // Init the hero text carousel
    initHeroCarousel();
  </script>
</body>

</html>
